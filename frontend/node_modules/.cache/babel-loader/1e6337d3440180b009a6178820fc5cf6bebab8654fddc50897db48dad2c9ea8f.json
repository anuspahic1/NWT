{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Adna\\\\Desktop\\\\frontend - Copy\\\\frontend\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [userRoles, setUserRoles] = useState([]);\n  const [userEmail, setUserEmail] = useState(null);\n  const [fullName, setFullName] = useState(null);\n  const [token, setToken] = useState(null);\n  const [doktorId, setDoktorId] = useState(null); // NOVO: Dodan doktorId state\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('jwtToken');\n    const storedRoles = localStorage.getItem('userRoles');\n    const storedEmail = localStorage.getItem('userEmail');\n    const storedFullName = localStorage.getItem('fullName');\n    const storedDoktorId = localStorage.getItem('doktorId'); // NOVO: Dohvatite doktorId iz localStorage-a\n\n    if (storedToken && storedRoles) {\n      setToken(storedToken);\n      setIsAuthenticated(true);\n      try {\n        setUserRoles(JSON.parse(storedRoles));\n      } catch (e) {\n        console.error(\"Failed to parse userRoles from localStorage\", e);\n        setUserRoles([]);\n      }\n      setUserEmail(storedEmail);\n      setFullName(storedFullName);\n      setDoktorId(parseInt(storedDoktorId)); // NOVO: Postavite doktorId, osigurajte da je broj\n    }\n  }, []);\n\n  // NOVO: Dodan 'id' kao parametar za login\n  const login = (jwtToken, roles, email, name, id) => {\n    localStorage.setItem('jwtToken', jwtToken);\n    localStorage.setItem('userRoles', JSON.stringify(roles));\n    localStorage.setItem('userEmail', email);\n    localStorage.setItem('fullName', name);\n    localStorage.setItem('doktorId', id); // NOVO: Pohranite doktorId u localStorage\n    setToken(jwtToken);\n    setIsAuthenticated(true);\n    setUserRoles(roles);\n    setUserEmail(email);\n    setFullName(name);\n    setDoktorId(id); // NOVO: Postavite doktorId\n  };\n  const logout = () => {\n    localStorage.removeItem('jwtToken');\n    localStorage.removeItem('userRoles');\n    localStorage.removeItem('userEmail');\n    localStorage.removeItem('fullName');\n    localStorage.removeItem('doktorId'); // NOVO: Uklonite doktorId iz localStorage-a\n    setToken(null);\n    setIsAuthenticated(false);\n    setUserRoles([]);\n    setUserEmail(null);\n    setFullName(null);\n    setDoktorId(null); // NOVO: Očistite doktorId\n  };\n  const hasRole = role => {\n    return userRoles.includes(role);\n  };\n  return (\n    /*#__PURE__*/\n    // NOVO: Dodan doktorId u value prop\n    _jsxDEV(AuthContext.Provider, {\n      value: {\n        isAuthenticated,\n        userRoles,\n        userEmail,\n        fullName,\n        token,\n        doktorId,\n        login,\n        logout,\n        hasRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(AuthProvider, \"cpy0VgF2phzjTQm+oVNfCNzjaZI=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","isAuthenticated","setIsAuthenticated","userRoles","setUserRoles","userEmail","setUserEmail","fullName","setFullName","token","setToken","doktorId","setDoktorId","storedToken","localStorage","getItem","storedRoles","storedEmail","storedFullName","storedDoktorId","JSON","parse","e","console","error","parseInt","login","jwtToken","roles","email","name","id","setItem","stringify","logout","removeItem","hasRole","role","includes","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/Adna/Desktop/frontend - Copy/frontend/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [userRoles, setUserRoles] = useState([]);\r\n  const [userEmail, setUserEmail] = useState(null);\r\n  const [fullName, setFullName] = useState(null);\r\n  const [token, setToken] = useState(null);\r\n  const [doktorId, setDoktorId] = useState(null); // NOVO: Dodan doktorId state\r\n\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem('jwtToken');\r\n    const storedRoles = localStorage.getItem('userRoles');\r\n    const storedEmail = localStorage.getItem('userEmail');\r\n    const storedFullName = localStorage.getItem('fullName');\r\n    const storedDoktorId = localStorage.getItem('doktorId'); // NOVO: Dohvatite doktorId iz localStorage-a\r\n\r\n    if (storedToken && storedRoles) {\r\n      setToken(storedToken);\r\n      setIsAuthenticated(true);\r\n      try {\r\n        setUserRoles(JSON.parse(storedRoles));\r\n      } catch (e) {\r\n        console.error(\"Failed to parse userRoles from localStorage\", e);\r\n        setUserRoles([]);\r\n      }\r\n      setUserEmail(storedEmail);\r\n      setFullName(storedFullName);\r\n      setDoktorId(parseInt(storedDoktorId)); // NOVO: Postavite doktorId, osigurajte da je broj\r\n    }\r\n  }, []);\r\n\r\n  // NOVO: Dodan 'id' kao parametar za login\r\n  const login = (jwtToken, roles, email, name, id) => {\r\n    localStorage.setItem('jwtToken', jwtToken);\r\n    localStorage.setItem('userRoles', JSON.stringify(roles));\r\n    localStorage.setItem('userEmail', email);\r\n    localStorage.setItem('fullName', name);\r\n    localStorage.setItem('doktorId', id); // NOVO: Pohranite doktorId u localStorage\r\n    setToken(jwtToken);\r\n    setIsAuthenticated(true);\r\n    setUserRoles(roles);\r\n    setUserEmail(email);\r\n    setFullName(name);\r\n    setDoktorId(id); // NOVO: Postavite doktorId\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('jwtToken');\r\n    localStorage.removeItem('userRoles');\r\n    localStorage.removeItem('userEmail');\r\n    localStorage.removeItem('fullName');\r\n    localStorage.removeItem('doktorId'); // NOVO: Uklonite doktorId iz localStorage-a\r\n    setToken(null);\r\n    setIsAuthenticated(false);\r\n    setUserRoles([]);\r\n    setUserEmail(null);\r\n    setFullName(null);\r\n    setDoktorId(null); // NOVO: Očistite doktorId\r\n  };\r\n\r\n  const hasRole = (role) => {\r\n    return userRoles.includes(role);\r\n  };\r\n\r\n  return (\r\n    // NOVO: Dodan doktorId u value prop\r\n    <AuthContext.Provider value={{ isAuthenticated, userRoles, userEmail, fullName, token, doktorId, login, logout, hasRole }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  return useContext(AuthContext);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}